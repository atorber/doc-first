# 4. 测试规范与模板

## 4.1 测试策略

### 测试金字塔
- **单元测试**: 覆盖率目标 80%
- **集成测试**: 覆盖率目标 60%
- **端到端测试**: 核心流程覆盖

## 4.2 测试模板

### 单元测试模板
```javascript
describe('[功能模块]', () => {
  it('应该实现 [预期行为]', () => {
    // Arrange
    // Act
    // Assert
  });
});
```

### 集成测试模板
```javascript
describe('API: [接口名称]', () => {
  it('应该返回正确的数据', async () => {
    const response = await request(app)
      .post('/api/endpoint')
      .send({ /* 测试数据 */ });
    expect(response.status).toBe(200);
  });
});
```

## 4.3 测试覆盖率要求

- 新增代码必须包含测试
- 覆盖率不低于 80%
- 核心业务逻辑必须 100% 覆盖

## 4.4 测试工具

| 类型 | 工具 |
| --- | --- |
| 单元测试 | Jest / Vitest / pytest |
| 集成测试 | Supertest / pytest |
| E2E 测试 | Playwright / Cypress |
